<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="print-style.css" rel="stylesheet"/><link rel="icon" href="./images/favicon.png" type="image/x-icon">
<script src="./com-header.js"></script><script src="./com-footer.js"></script>

<!--ANALYTICS-->
<!--IN root folder, install   npm i @vercel/analytics (just once) - then put below code in files -->
<script class="hidden">window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };</script>
<script defer src="/_vercel/insights/script.js"></script>
</head>




<body>
<main>
<title>Moroccan Harira</title>
<sub-title>blissfuleats.com</sub-title>
<print onclick="window.print()">Print</print>
<div class="flex">
    <div>
        <stars value=""></stars>
        <star-rating-avg>
            <img class="rating-star" value="1" src="./images/filled-star.png"/>
            <img class="rating-star" value="2" src="./images/filled-star.png"/>
            <img class="rating-star" value="3" src="./images/filled-star.png"/>
            <img class="rating-star" value="4" src="./images/filled-star.png"/>
            <img class="rating-star" value="5" src="./images/filled-star.png"/>
        </star-rating-avg>
        <hstack>
            <rating id="average"></rating>
            <text>from</text>
            <num-of-reviews id="numOfReviews"></num-of-reviews>
            <text>reviews</text>
        </hstack>
    </div>
    <div>
<author>Jay B.</author>
<author>Posted: June 2, 2025</author>
<date>Last Updated: Dec. 18, 2025</date>
    </div>
</div>
<div class="flex">
    <div>
        <h2 id="time">Time Commitment</h2>
<p><b>Total Time:</b> 1 hr 15 min</p>
<p><b>Prep Time:</b> 15 min</p>
<p><b>Wait Time:</b> 0 min</p>
<p><b>Cook Time:</b> 1 hr</p>
    </div>
    <div>
        <h2 id="materials">Materials</h2>
<p><b>Large pot or sauce pan (at least 10 cups)</b></p>

    </div>
</div>

<div class="flex">
    <div>
            <h2>Number of Servings</h2>
            <serving-buttons>
            <decrease-serving>-</decrease-serving>
            <serving-div><servings>1</servings><span>X</span></serving-div>
            <increase-serving>+</increase-serving>
            </serving-buttons>
<tiny-text class="bold">Makes <people value="4">4</people> 1.5 cup servings</tiny-text>
            <tiny-text>Nutrition values, ingredient values in the ingredient list, and ingredient values in the directions auto-update.</tiny-text> 
    </div>
    <div>
<h2>Nutrition</h2>
<p><b>Calories:</b> <quantity value="1077">1077</quantity></p>
<p><b>Carbs:</b> <quantity value="146">146</quantity></p>
<p><b>Fat:</b> <quantity value="30">30</quantity></p>
<p><b>Protein:</b> <quantity value="70">70</quantity></p>
<tiny-text>The nutrition values are for the entire dish, not per serving</tiny-text>
    </div>
</div>

<div class="flex">
<div>
<h2>Ingredients</h2>

<h4>Spices:</h4>
<p>salt, <quantity value="1">1</quantity> tsp</p>
<p>pepper, <quantity value="0.5">0.5</quantity> tsp</p>
<p>turmeric, <quantity value="0.5">0.5</quantity> tsp</p>
<p>cumin, <quantity value="0.5">0.5</quantity> tsp</p>
<p>cinnamon, <quantity value="0.125">0.125</quantity> tsp (original - 1/8 tsp)</p>
<p>ground cayenne, <quantity value="0.125">0.125</quantity> tsp (original - 1/8 tsp)</p>
<note>Leave out the cayenne if you don't like spicy foods.</note>
        
<h4>Dry:</h4>
<p>olive oil, <quantity value="2">2</quantity> TBSP</p>
<p>water, <quantity value="4">4</quantity> cups</p>
<p>chickpeas, <quantity value="1">1</quantity> 14.5oz cans, drained</p>
<p>dry lentils, <quantity value="0.667">0.667</quantity> cups, dry (original - 2/3 cup)</p>
<p>crushed tomatoes, <quantity value="1">1</quantity> 15.5oz cans</p>
<p>tomato paste, <quantity value="1">1</quantity> TBSP</p>


</div>



<div>
<h4>Produce:</h4>
<p>garlic cloves, <quantity value="1">1</quantity> large</p>
<p>yellow onion, <quantity value="0.5">0.5</quantity> medium</p>
<p>carrots, <quantity value="0.5">0.5</quantity> large</p>
<p>celery, <quantity value="1">1</quantity> stalks</p>
<p>chopped cilantro, <quantity value="0.333">0.333</quantity> cups (original - 1/3 cup)</p>
<p>lemon, <quantity value="1">1</quantity> large</p>
        
<h4>Dairy & Eggs:</h4>
  
<h4>Meat:</h4>

</div>


</div>






<div class="flex-column">
<div>
<h2>Directions</h2>
</div>



<div>     
<h3>Step 1:</h3>
<p>Chop/mince:</p>
<p><quantity value="0.5">0.5</quantity> medium yellow onions</p>
<p><quantity value="0.5">0.5</quantity> large carrots</p>
<p><quantity value="1">1</quantity> celery stalks</p>
<p><quantity value="0.333">0.333</quantity> cilantro (original - 1/3 cup)</p>
<p><quantity value="1">1</quantity> large garlic clove, minced</p>
<p>Set aside.</p>
</div>




<div>
<h3>Step 2:</h3>
<p>Add the onions, carrots, and celery to a large pot with:</p>
<p><quantity value="2">2</quantity> TBSP extra virgin olive oil</p>
<p>Cook until softer on medium-low heat (about 5 minutes).</p>

</div>



<div>
<h3>Step 3:</h3>
<p>Now add the garlic and:</p>
<p><quantity value="0.5">0.5</quantity> tsp pepper</p>
<p><quantity value="0.5">0.5</quantity> tsp turmeric</p>
<p><quantity value="0.5">0.5</quantity> tsp cumin</p>
<p><quantity value="0.125">0.125</quantity> tsp cinnamon (original - 1/8 tsp)</p>
<p><quantity value="0.125">0.125</quantity> tsp ground cayenne (original - 1/8 tsp)</p>
<p>Stir everything together well.</p>
</div>



<div>
<h3>Step 4:</h3>
<p>Now add the chopped cilantro and:</p>
<p><quantity value="4">4</quantity> cups water</p>
<p><quantity value="1">1</quantity> 14.5oz cans chickpeas, drained</p>
<p><quantity value="0.667">0.667</quantity> dry lentils (original - 2/3 cup)</p>
<p><quantity value="1">1</quantity> 15.5oz cans crushed tomatoes</p>
<p><quantity value="1">1</quantity> TBSP tomato paste</p>
<p>Stir everything together well.</p>
<p>Bring to a boil then reduce to a simmer on medium-high. Cover and let the lentils cook until tender. </p>
<note>For dry lentils, it will take around an hour to cook.</note>
<note>You might need to add more water at the end, so keep an eye on the lentils.</note>
</div>



<div>
<h3>Step 5:</h3>
<p>Salt to taste, and slice:</p>
<p><quantity value="1">l</quantity> lemons (into wedges)</p>
<p>Serve with lemon wedges and enjoy!</p>

</div>
    

</div>





<script type="module">
const recipe = 31;

/* AFTER VERCEL DEPLOYMENT TO SET UP DATABASE, I ADDED THIS*/
//const hostname = window.location.hostname;

async function fetchData(recipe) {
        try {
        //const response = await fetch(`http://localhost:5000/api/data/${recipe}`);
        const response = await fetch(`/api/data/${recipe}`, {
                method: "GET"
            });
        const data = await response.json();
        const array = JSON.stringify(data.replies)
        const container = document.querySelector('comments-container');
        const replies = document.querySelector('rep');
        let reply = ' ';
        let html = ' '; // Example headers
        let innerReply = ' ';
        const mainContainer = document.querySelector("comments-container");
        
        let ratings=[];
        let sum = 0;
        let avg = 0;
        const numOfReviews = document.getElementById("numOfReviews");
        const average = document.getElementById("average");
        const starss = document.querySelector("stars"); // stars
        const ratingstars = document.querySelectorAll(".rating-star");

        data.all.forEach(comment => {
            if(comment.reply_to == 'main'){
                ratings.push(comment.rating);
                sum += Number(comment.rating);
            }
            avg = sum/ratings.length;
            numOfReviews.innerHTML = ratings.length;
            average.innerHTML = avg.toFixed(2);
            starss.setAttribute("value", Math.floor(avg));

            ratingstars.forEach(element => {
                if(element.getAttribute("value") <= starss.getAttribute("value")){
                    element.src = "./images/filled-star.png";
                }
                else{
                    element.src = "./images/empty-star.png";
                }
            })
            
        })
    }catch (error) {console.error('Error fetching data:', error);document.getElementById('dataContainer').innerHTML = '<p>Error loading data.</p>';}
}
fetchData(recipe)
async function postData(formData){try {const recipe = 31;const response = await fetch(`http://localhost:5000/api/data/comment/`, {method: "POST", headers: {"Content-Type": "application/json"},body: JSON.stringify(formData)});} catch (err) {console.error(err.message);}window.location.reload();}
</script>

</main>
<script src="./print-script.js"></script>
</body>
</html>